# =============================================================================================== #
# Project:      Battery-Z                                                                         #
# Description:  Runtime & Build Dependencies for the Battery Diagnostic Utility                   #
# Author:       Muhammad Kashan Tariq                                                             #
# Version:      2.1 (for App v2.1.0)                                                              #
# Last Updated: October 29, 2025                                                                  #
# =============================================================================================== #
#                                                                                                 #
# Purpose: This file lists the essential Python packages needed to RUN Battery-Z                  #
#          and the tools required to BUILD the standalone executable (.exe).                      #
#                                                                                                 #
# Instructions:                                                                                   #
# 1. To RUN from source: Install 'Runtime Dependencies' into a Python virtual environment.        #
# 2. To BUILD the .exe: Install ALL dependencies, then follow the Build Guide below.              #
#                                                                                                 #
###################################################################################################


# =============================================================================================== #
# === 1. Runtime Dependencies (Required to RUN Battery-Z.py) ==================================== #
# =============================================================================================== #
# These packages are essential for the application's core functionality.                          #

# PyQt5: The UI framework. Provides all graphical components, threading, signals, etc.
# Pinning to 5.15.10 ensures compatibility and stability as used in development.
PyQt5==5.15.10

# psutil: Cross-platform process and system utilities. Used for efficiently getting
# basic battery status (presence, percentage, AC status) as a primary data source.
psutil==5.9.8

# wmi: Windows Management Instrumentation interface. Crucial for accessing detailed
# hardware-specific battery data on Windows (cycle count, capacity, temp, manufacturer, etc.).
# Note: Requires the 'pythoncom' library, which is automatically installed with 'pywin32',
# a dependency PyInstaller usually bundles correctly, but it's good to be aware of.
wmi==1.5.1

# numpy: Fundamental package for scientific computing. Used optionally in the RUL
# prediction algorithm for potentially more accurate calculations if available.
# The application includes checks and fallbacks if numpy is not present, but it's
# recommended for the best prediction quality.
numpy==1.26.4


# =============================================================================================== #
# === 2. Build Dependency (Required ONLY to CREATE Battery-Z.exe) =============================== #
# =============================================================================================== #
# This tool bundles the Python script and all dependencies into a single executable.              #

# PyInstaller: Converts Python applications into stand-alone executables.
# Version 6.6.0 is known to work well with Python 3.8+ and the dependencies used.
pyinstaller==6.6.0


# =============================================================================================== #
# === 3. Build Guide: Creating the Standalone Battery-Z.exe ===================================== #
# =============================================================================================== #
# Follow these steps precisely in your command prompt or terminal within the project directory.   #
#                                                                                                 #
# ---------------                                                                                 #
# | Preparation |                                                                                 #
# ---------------                                                                                 #
#                                                                                                 #
# 1. Install Python: Ensure Python 3.8 or newer is installed (check with `python --version`).     #
#                                                                                                 #
# 2. Create Virtual Environment (Recommended):                                                    #
#    python -m venv venv                                                                          #
#    venv\Scripts\activate  (Windows)                                                             #
#    # source venv/bin/activate (macOS/Linux - though app is Windows-only)                       #
#                                                                                                 #
# 3. Install ALL Dependencies:                                                                    #
#    pip install -r requirements.txt                                                              #
#                                                                                                 #
# 4. Create Manifest File (`manifest.xml`):                                                       #
#    - In the SAME directory as `Battery-Z.py`, create a file named `manifest.xml`.               #
#    - Paste the following content EXACTLY into `manifest.xml`:                                   #
#                                                                                                 #
#      ```xml                                                                                     #
#      <?xml version="1.0" encoding="UTF-8" standalone="yes"?>                                   #
#      <assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">                 #
#        <assemblyIdentity version="1.0.0.0" processorArchitecture="*" name="BatteryZ.App" type="win32"/> #
#        <description>Battery-Z Battery Monitoring Utility</description>                          #
#        <dependency>                                                                              #
#          <dependentAssembly>                                                                     #
#            <assemblyIdentity type="win32" name="Microsoft.Windows.Common-Controls" version="6.0.0.0" processorArchitecture="*" publicKeyToken="6595b64144ccf1df" language="*"/> #
#          </dependentAssembly>                                                                    #
#        </dependency>                                                                             #
#        <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">                                      #
#          <security>                                                                              #
#            <requestedPrivileges>                                                                 #
#              #
#              <requestedExecutionLevel level="requireAdministrator" uiAccess="false"/>            #
#            </requestedPrivileges>                                                                #
#          </security>                                                                             #
#        </trustInfo>                                                                              #
#        <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">                        #
#          <application>                                                                           #
#            #
#            <supportedOS Id="{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}"/> #
#            <supportedOS Id="{1f676c76-80e1-4239-95bb-83d0f6d0da78}"/> #
#            <supportedOS Id="{4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38}"/> #
#            <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/> #
#          </application>                                                                          #
#        </compatibility>                                                                         #
#      </assembly>                                                                                #
#      ```                                                                                         #
#                                                                                                 #
#    - Purpose: This XML file tells Windows that the application requires administrator          #
#               privileges to run, ensuring it can access necessary system data.                 #
#                                                                                                 #
# 5. Ensure Assets are Present:                                                                   #
#    - Confirm `logo.ico` and `logo.svg` are in the same directory as `Battery-Z.py`.             #
#    - Confirm `Battery-Z.py` has the `resource_path` function and uses it for logo paths.        #
#                                                                                                 #
# --------------------                                                                            #
# | The Build Command |                                                                            #
# --------------------                                                                            #
#                                                                                                 #
# 6. Run PyInstaller: Execute the following command in your terminal/CMD, ensuring you are        #
#    still in the main project directory (`Battery-Z/`).                                          #
#    (Copy and paste the entire command)                                                          #
#                                                                                                 #
#    ```cmd                                                                                       #
#    pyinstaller --onefile --windowed --name "Battery-Z" --icon="logo.ico" --add-data="logo.ico;." --add-data="logo.svg;." --uac-admin --hidden-import="PyQt5.sip" --hidden-import="PyQt5.QtSvg" --hidden-import="wmi" --hidden-import="psutil" --hidden-import="numpy" --hidden-import="pythoncom" --hidden-import="logging.handlers" Battery-Z.py #
#    ```                                                                                         #
#                                                                                                 #
#    Command Breakdown:                                                                           #
#      --onefile        : Creates a single `.exe` file.                                           #
#      --windowed       : No console window appears when running the `.exe`.                      #
#      --name "B-Z"     : Sets the output filename to `Battery-Z.exe`.                            #
#      --icon="logo.ico": Sets the file's icon in Windows Explorer.                               #
#      --add-data="X;." : Bundles asset file `X` into the `.exe`.                                  #
#      --uac-admin      : Embeds a manifest requesting Administrator privileges (uses the XML).   #
#      --hidden-import="Y": Ensures PyInstaller includes library `Y` which it might miss.         #
#      Battery-Z.py     : Your main script.                                                       #
#                                                                                                 #
# --------------                                                                                  #
# | Locating & |                                                                                  #
# | Testing    |                                                                                  #
# --------------                                                                                  #
#                                                                                                 #
# 7. Find the Executable:                                                                         #
#    - After the command finishes, look inside the newly created `dist` folder.                   #
#    - You will find `Battery-Z.exe`. This is your complete, standalone application.              #
#                                                                                                 #
# 8. CRITICAL - Test Thoroughly:                                                                  #
#    - Copy ONLY `Battery-Z.exe` to a DIFFERENT location or (ideally) a clean Windows PC/VM       #
#      that does NOT have Python or any of these libraries installed.                             #
#    - Run it. Does it ask for Admin rights (UAC prompt)?                                         #
#    - Does it launch correctly without errors?                                                   #
#    - Are the logos displayed?                                                                   #
#    - Does it fetch battery data? Check all cards.                                               #
#    - Does the system tray icon work?                                                            #
#                                                                                                 #
# 9. Distribute: Once tested, you can share/upload the `Battery-Z.exe` file from the `dist` folder. #
#                                                                                                 #
###################################################################################################
# End of requirements.txt                                                                         #
###################################################################################################
